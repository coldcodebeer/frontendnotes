<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>requestAnimationFrame demo</title>
  <style>
    html {
      font-size: 20px;
      font-weight: 300;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
        Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }

    header {
      padding: .5rem;
      margin: 1rem 0;
    }

    p {
      margin: 1rem;
      padding: 1rem;
      border: 1px solid #999;
    }

    #box {
      background-color: cornflowerblue;
      width: 1rem;
      height: 1rem;
      border: 0;
    }
  </style>
</head>

<body>
  <header>
    <h1>Request Animation Frame</h1>
  </header>
  <main>
    <p id="box"></p>
  </main>
  <script>
    const box = document.querySelector('#box')
    let count = 0
    let xpos = 0

    window.requestAnimationFrame(move)

    function move(timmy) {
      if (timmy) {
        const diff = timmy - count
        console.log('frame', diff)
        count = timmy //highResTimeStamp
      }

      xpos = xpos + 5

      box.style.transform = `translateX(${xpos}px)`
      const ww = document.body.clientWidth

      if (xpos >= ww) {
        xpos = 0
      }

      // block the animation
      // for (let i = 0; i < 10; i++) {
      //   console.log('___', +new Date)
      // }

      requestAnimationFrame(move)
    }
  </script>
</body>

</html>